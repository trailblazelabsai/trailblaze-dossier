<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trailblaze Labs - Client Dossier Builder</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Plus Jakarta Sans', sans-serif; }
    body { background: #0d0907; margin: 0; }
    
    @keyframes float {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-20px) scale(1.02); }
    }
    
    @keyframes pulse-glow {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 0.6; }
    }
    
    @keyframes confetti-fall {
      0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    @keyframes celebrate {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .float-orb { animation: float 8s ease-in-out infinite; }
    .float-orb-2 { animation: float 12s ease-in-out infinite; animation-delay: 2s; }
    .pulse-glow { animation: pulse-glow 4s ease-in-out infinite; }
    .celebrate { animation: celebrate 0.5s ease-in-out; }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      top: -10px;
      animation: confetti-fall 3s ease-out forwards;
    }
    
    select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23a1a1aa'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 1rem center;
      background-size: 1.5rem;
    }
    
    .focus-glow { transition: box-shadow 0.3s ease; }
    .focus-glow:focus { box-shadow: 0 0 30px rgba(249, 115, 22, 0.3); }
    
    @keyframes spin { to { transform: rotate(360deg); } }
    .animate-spin { animation: spin 1s linear infinite; }
    
    @keyframes dot-pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .dot-pulse { animation: dot-pulse 2s ease-in-out infinite; }
    
    .progress-ring { transition: stroke-dashoffset 0.5s ease; }
    
    .warm-input {
      background: rgba(30, 22, 18, 0.9);
      border: 1px solid rgba(140, 90, 50, 0.3);
    }
    .warm-input:focus {
      border-color: rgba(249, 115, 22, 0.6);
      background: rgba(40, 28, 20, 0.95);
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;

    // ============================================
    // CONFIGURATION
    // ============================================
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwfFfQSTUa3cHQR34MjLm55qtAneFYmmgvMnULsx025D6Ni5hBUG86xweP_2XqF8XnsKQ/exec';
    
    const DEFAULT_ORGANIZATIONS = [
      { id: 'maverick', name: 'Maverick' },
      { id: 'guide', name: 'Guide' },
      { id: 'csc', name: 'CSC' },
      { id: 'actus', name: 'Actus' },
      { id: 'evolve', name: 'Evolve' }
    ];
    // ============================================

    const Confetti = ({ show }) => {
      if (!show) return null;
      const colors = ['#f97316', '#f59e0b', '#eab308', '#22c55e', '#3b82f6', '#8b5cf6'];
      const confettiPieces = Array.from({ length: 50 }, (_, i) => ({
        id: i,
        left: Math.random() * 100,
        delay: Math.random() * 2,
        color: colors[Math.floor(Math.random() * colors.length)],
        size: Math.random() * 10 + 5
      }));
      return (
        <div className="fixed inset-0 pointer-events-none z-50">
          {confettiPieces.map(piece => (
            <div key={piece.id} className="confetti" style={{ left: `${piece.left}%`, animationDelay: `${piece.delay}s`, backgroundColor: piece.color, width: piece.size, height: piece.size, borderRadius: Math.random() > 0.5 ? '50%' : '0' }} />
          ))}
        </div>
      );
    };

    const ProgressRing = ({ progress, size = 120, strokeWidth = 8 }) => {
      const radius = (size - strokeWidth) / 2;
      const circumference = radius * 2 * Math.PI;
      const offset = circumference - (progress / 100) * circumference;
      return (
        <svg width={size} height={size} className="transform -rotate-90">
          <circle cx={size / 2} cy={size / 2} r={radius} fill="none" stroke="rgba(80, 50, 30, 0.5)" strokeWidth={strokeWidth} />
          <circle cx={size / 2} cy={size / 2} r={radius} fill="none" stroke="url(#progress-gradient)" strokeWidth={strokeWidth} strokeDasharray={circumference} strokeDashoffset={offset} strokeLinecap="round" className="progress-ring" />
          <defs>
            <linearGradient id="progress-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stopColor="#ea580c" />
              <stop offset="100%" stopColor="#22c55e" />
            </linearGradient>
          </defs>
        </svg>
      );
    };

    const BryceDossierApp = () => {
      const [organizations, setOrganizations] = useState(DEFAULT_ORGANIZATIONS);
      const [completedOrgs, setCompletedOrgs] = useState(() => {
        const saved = localStorage.getItem('bryce-completed-orgs-v2');
        return saved ? JSON.parse(saved) : {};
      });
      const [isLoadingOrgs, setIsLoadingOrgs] = useState(true);
      const [selectedOrg, setSelectedOrg] = useState('');
      const [isEditing, setIsEditing] = useState(false);
      const [showConfetti, setShowConfetti] = useState(false);
      const [justCompleted, setJustCompleted] = useState(null);
      const [showAddOrg, setShowAddOrg] = useState(false);
      const [newOrgName, setNewOrgName] = useState('');
      const [isAddingOrg, setIsAddingOrg] = useState(false);
      
      const [formData, setFormData] = useState({
        engagementMonth: '',
        engagementYear: new Date().getFullYear().toString(),
        status: 'Client',
        practices: { education: false, strategy: false, builds: false },
        workDelivered: '',
        activeWork: '',
        futureWork: '',
        comments: ''
      });
      
      const [isSubmitting, setIsSubmitting] = useState(false);
      const [submitStatus, setSubmitStatus] = useState(null);

      const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
      const years = Array.from({ length: 10 }, (_, i) => (new Date().getFullYear() - i).toString());

      const completedCount = Object.keys(completedOrgs).length;
      const totalCount = organizations.length;
      const progress = totalCount > 0 ? (completedCount / totalCount) * 100 : 0;
      const allComplete = completedCount === totalCount && totalCount > 0;

      useEffect(() => {
        const loadOrganizations = async () => {
          try {
            const response = await fetch(`${GOOGLE_SCRIPT_URL}?action=getOrgs`);
            const data = await response.json();
            if (data.organizations && data.organizations.length > 0) {
              setOrganizations(data.organizations);
            }
          } catch (error) {
            console.log('Using default organizations:', error);
          } finally {
            setIsLoadingOrgs(false);
          }
        };
        loadOrganizations();
      }, []);

      useEffect(() => {
        localStorage.setItem('bryce-completed-orgs-v2', JSON.stringify(completedOrgs));
      }, [completedOrgs]);

      const getMotivationalMessage = () => {
        if (allComplete) return "üèÜ Mission accomplished! All dossiers complete.";
        if (completedCount === 0) return "Let's get started! Pick your first organization.";
        const pct = (completedCount / totalCount) * 100;
        if (pct < 25) return "Great start! You're building momentum.";
        if (pct < 50) return "Nice work! Making solid progress.";
        if (pct < 75) return "Over halfway! The finish line is in sight.";
        if (pct < 100) return "Almost there! Just a few more to go.";
        return "Keep going!";
      };

      const handleOrgSelect = (orgId) => {
        setSelectedOrg(orgId);
        setSubmitStatus(null);
        
        if (completedOrgs[orgId]) {
          setFormData(completedOrgs[orgId]);
          setIsEditing(true);
        } else {
          setFormData({
            engagementMonth: '',
            engagementYear: new Date().getFullYear().toString(),
            status: 'Client',
            practices: { education: false, strategy: false, builds: false },
            workDelivered: '',
            activeWork: '',
            futureWork: '',
            comments: ''
          });
          setIsEditing(false);
        }
      };

      const handleInputChange = (field, value) => {
        setFormData(prev => ({ ...prev, [field]: value }));
      };

      const handlePracticeToggle = (practice) => {
        setFormData(prev => ({
          ...prev,
          practices: { ...prev.practices, [practice]: !prev.practices[practice] }
        }));
      };

      const handleAddOrg = async () => {
        if (!newOrgName.trim()) return;
        
        setIsAddingOrg(true);
        const orgId = newOrgName.trim().toLowerCase().replace(/\s+/g, '-');
        const orgName = newOrgName.trim();
        
        try {
          await fetch(GOOGLE_SCRIPT_URL, {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              action: 'addOrg',
              orgId: orgId,
              orgName: orgName
            })
          });
          
          setOrganizations(prev => [...prev, { id: orgId, name: orgName }]);
          setNewOrgName('');
          setShowAddOrg(false);
        } catch (error) {
          console.error('Error adding org:', error);
        } finally {
          setIsAddingOrg(false);
        }
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        setIsSubmitting(true);
        setSubmitStatus(null);

        const practicesArray = [];
        if (formData.practices.education) practicesArray.push('Education & Training');
        if (formData.practices.strategy) practicesArray.push('Strategy & Fractional Leadership');
        if (formData.practices.builds) practicesArray.push('Builds & Projects');

        const org = organizations.find(o => o.id === selectedOrg);
        const orgName = org?.name || selectedOrg;
        
        const submissionData = {
          action: 'submitDossier',
          timestamp: new Date().toISOString(),
          clientName: orgName,
          status: formData.status,
          engagementDate: `${formData.engagementMonth} ${formData.engagementYear}`,
          practices: practicesArray.join(', '),
          workDelivered: formData.workDelivered,
          activeWork: formData.activeWork,
          futureWork: formData.futureWork,
          comments: formData.comments,
          submittedBy: 'Bryce',
          isUpdate: isEditing
        };

        try {
          await fetch(GOOGLE_SCRIPT_URL, {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(submissionData)
          });
          
          const wasNewCompletion = !completedOrgs[selectedOrg];
          
          setCompletedOrgs(prev => ({
            ...prev,
            [selectedOrg]: formData
          }));
          
          setSubmitStatus('success');
          
          if (wasNewCompletion) {
            setJustCompleted(selectedOrg);
            setShowConfetti(true);
            setTimeout(() => {
              setShowConfetti(false);
              setJustCompleted(null);
            }, 3000);
          }
          
          setTimeout(() => {
            setSelectedOrg('');
            setIsEditing(false);
          }, 2000);
          
        } catch (error) {
          console.error('Submission error:', error);
          setSubmitStatus('error');
        } finally {
          setIsSubmitting(false);
        }
      };

      const practiceCards = [
        { id: 'education', title: 'Education & Training', icon: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342" /></svg> },
        { id: 'strategy', title: 'Strategy & Fractional Leadership', icon: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M3.75 3v11.25A2.25 2.25 0 0 0 6 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0 1 18 16.5h-2.25m-7.5 0h7.5m-7.5 0-1 3m8.5-3 1 3m0 0 .5 1.5m-.5-1.5h-9.5m0 0-.5 1.5m.75-9 3-3 2.148 2.148A12.061 12.061 0 0 1 16.5 7.605" /></svg> },
        { id: 'builds', title: 'Builds & Projects', icon: <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" className="w-5 h-5"><path strokeLinecap="round" strokeLinejoin="round" d="M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z" /></svg> }
      ];

      if (isLoadingOrgs) {
        return (
          <div className="min-h-screen flex items-center justify-center" style={{ background: '#0d0907' }}>
            <div className="text-center">
              <svg className="animate-spin h-8 w-8 mx-auto mb-4" style={{ color: '#ea580c' }} viewBox="0 0 24 24">
                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
              </svg>
              <p style={{ color: '#d4d4d4' }}>Loading organizations...</p>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen text-white overflow-hidden relative" style={{ background: '#0d0907' }}>
          <Confetti show={showConfetti} />
          
          {/* Background - warm orange/brown glow like Trailblaze site */}
          <div className="fixed inset-0 overflow-hidden pointer-events-none">
            <div className="float-orb absolute w-[900px] h-[900px] rounded-full blur-3xl pulse-glow" style={{ top: '-20%', left: '10%', background: 'radial-gradient(circle, rgba(180, 83, 9, 0.5) 0%, rgba(120, 53, 15, 0.3) 30%, transparent 60%)' }} />
            <div className="float-orb-2 absolute w-[600px] h-[600px] rounded-full blur-3xl pulse-glow" style={{ bottom: '-10%', right: '5%', background: 'radial-gradient(circle, rgba(234, 88, 12, 0.3) 0%, rgba(154, 52, 18, 0.15) 40%, transparent 60%)' }} />
          </div>

          <div className="relative z-10 max-w-4xl mx-auto px-6 py-8">
            {/* Header */}
            <header className="text-center mb-10">
              <div className="inline-flex items-center gap-3 mb-5">
                <div className="relative">
                  <div className="w-11 h-11 rounded-xl flex items-center justify-center" style={{ background: 'linear-gradient(135deg, #ea580c 0%, #f97316 100%)', boxShadow: '0 8px 32px rgba(234, 88, 12, 0.4)' }}>
                    <svg viewBox="0 0 24 24" fill="none" className="w-6 h-6 text-white">
                      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="currentColor"/>
                    </svg>
                  </div>
                </div>
                <span className="text-xl font-bold tracking-tight">
                  <span className="text-white">Trailblaze</span>
                  <span style={{ color: '#ea580c' }}> Labs</span>
                </span>
              </div>
              
              <h1 className="text-4xl md:text-5xl font-extrabold mb-3 text-white">
                Hey Bryce üëã
              </h1>
              <p className="text-lg max-w-xl mx-auto" style={{ color: '#d4d4d4' }}>
                Let's build out the client dossiers. {getMotivationalMessage()}
              </p>
            </header>

            {/* Progress Section */}
            <div className={`mb-8 p-6 rounded-2xl transition-all duration-500 ${allComplete ? 'celebrate' : ''}`} style={{ 
              background: allComplete ? 'rgba(34, 197, 94, 0.15)' : 'rgba(25, 18, 14, 0.9)', 
              border: `1px solid ${allComplete ? 'rgba(34, 197, 94, 0.4)' : 'rgba(140, 90, 50, 0.3)'}`,
              backdropFilter: 'blur(10px)'
            }}>
              <div className="flex items-center justify-between gap-6">
                <div className="flex-1">
                  <div className="flex items-center gap-3 mb-4">
                    <h2 className="text-lg font-bold text-white">Progress</h2>
                    <span className="px-3 py-1 rounded-full text-sm font-semibold" style={{ 
                      background: allComplete ? 'rgba(34, 197, 94, 0.25)' : 'rgba(234, 88, 12, 0.25)', 
                      color: allComplete ? '#86efac' : '#fb923c' 
                    }}>
                      {completedCount} of {totalCount}
                    </span>
                  </div>
                  
                  {/* Organization Pills */}
                  <div className="flex flex-wrap gap-2">
                    {organizations.map(org => {
                      const isComplete = !!completedOrgs[org.id];
                      const isJustCompleted = justCompleted === org.id;
                      const savedStatus = completedOrgs[org.id]?.status;
                      const isProspect = savedStatus === 'Prospect';
                      return (
                        <button
                          key={org.id}
                          onClick={() => handleOrgSelect(org.id)}
                          className={`px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 flex items-center gap-2 ${isJustCompleted ? 'celebrate' : ''}`}
                          style={{
                            background: isComplete 
                              ? (isProspect ? 'rgba(59, 130, 246, 0.25)' : 'rgba(34, 197, 94, 0.25)') 
                              : 'rgba(50, 35, 25, 0.9)',
                            border: `1px solid ${isComplete 
                              ? (isProspect ? 'rgba(96, 165, 250, 0.5)' : 'rgba(74, 222, 128, 0.5)') 
                              : 'rgba(140, 90, 50, 0.4)'}`,
                            color: isComplete 
                              ? (isProspect ? '#93c5fd' : '#86efac') 
                              : '#ffffff'
                          }}
                        >
                          {isComplete && (
                            <svg className="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="3">
                              <path strokeLinecap="round" strokeLinejoin="round" d="M5 13l4 4L19 7" />
                            </svg>
                          )}
                          {org.name}
                          {isComplete && isProspect && (
                            <span className="text-xs opacity-80">(P)</span>
                          )}
                        </button>
                      );
                    })}
                    
                    {/* Add Organization Button */}
                    <button
                      onClick={() => setShowAddOrg(true)}
                      className="px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 flex items-center gap-2 hover:border-orange-500"
                      style={{
                        background: 'rgba(40, 28, 20, 0.8)',
                        border: '1px dashed rgba(234, 88, 12, 0.5)',
                        color: '#ea580c'
                      }}
                    >
                      <svg className="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                        <path strokeLinecap="round" strokeLinejoin="round" d="M12 4v16m8-8H4" />
                      </svg>
                      Add Org
                    </button>
                  </div>
                </div>
                
                {/* Progress Ring */}
                <div className="relative flex-shrink-0">
                  <ProgressRing progress={progress} size={100} strokeWidth={8} />
                  <div className="absolute inset-0 flex items-center justify-center">
                    <span className="text-2xl font-bold" style={{ color: allComplete ? '#86efac' : '#fb923c' }}>
                      {Math.round(progress)}%
                    </span>
                  </div>
                </div>
              </div>
            </div>

            {/* Add Organization Modal */}
            {showAddOrg && (
              <div className="fixed inset-0 z-50 flex items-center justify-center p-4" style={{ background: 'rgba(0,0,0,0.85)' }}>
                <div className="w-full max-w-md p-6 rounded-2xl" style={{ background: '#1a1310', border: '1px solid rgba(140, 90, 50, 0.3)' }}>
                  <h3 className="text-xl font-bold mb-4 text-white">Add New Organization</h3>
                  <input
                    type="text"
                    value={newOrgName}
                    onChange={(e) => setNewOrgName(e.target.value)}
                    placeholder="Organization name"
                    className="w-full px-4 py-3 rounded-xl text-white focus:outline-none mb-4 warm-input"
                    autoFocus
                  />
                  <div className="flex gap-3">
                    <button
                      onClick={() => { setShowAddOrg(false); setNewOrgName(''); }}
                      className="flex-1 px-4 py-3 rounded-xl font-semibold transition-all"
                      style={{ background: 'rgba(60, 40, 30, 0.8)', color: '#d4d4d4', border: '1px solid rgba(140, 90, 50, 0.3)' }}
                    >
                      Cancel
                    </button>
                    <button
                      onClick={handleAddOrg}
                      disabled={!newOrgName.trim() || isAddingOrg}
                      className="flex-1 px-4 py-3 rounded-xl font-semibold transition-all"
                      style={{ 
                        background: newOrgName.trim() ? 'linear-gradient(135deg, #ea580c 0%, #f97316 100%)' : 'rgba(60, 40, 30, 0.8)',
                        color: newOrgName.trim() ? 'white' : '#71717a',
                        cursor: newOrgName.trim() ? 'pointer' : 'not-allowed',
                        boxShadow: newOrgName.trim() ? '0 8px 24px rgba(234, 88, 12, 0.3)' : 'none'
                      }}
                    >
                      {isAddingOrg ? 'Adding...' : 'Add Organization'}
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* Empty State */}
            {!allComplete && !selectedOrg && (
              <div className="text-center py-16">
                <div className="inline-flex items-center justify-center w-20 h-20 rounded-full mb-5" style={{ background: 'rgba(234, 88, 12, 0.15)', border: '1px solid rgba(234, 88, 12, 0.3)' }}>
                  <svg className="w-10 h-10" style={{ color: '#ea580c' }} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="1.5">
                    <path strokeLinecap="round" strokeLinejoin="round" d="M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59" />
                  </svg>
                </div>
                <h3 className="text-2xl font-bold mb-2 text-white">Select an Organization</h3>
                <p style={{ color: '#a1a1aa' }}>Click any organization above to start or edit its dossier</p>
              </div>
            )}

            {allComplete && !selectedOrg && (
              <div className="text-center py-16">
                <div className="inline-flex items-center justify-center w-24 h-24 rounded-full mb-5" style={{ background: 'rgba(34, 197, 94, 0.15)', border: '1px solid rgba(34, 197, 94, 0.3)' }}>
                  <svg className="w-12 h-12" style={{ color: '#86efac' }} fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="1.5">
                    <path strokeLinecap="round" strokeLinejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z" />
                  </svg>
                </div>
                <h3 className="text-3xl font-bold mb-2" style={{ color: '#86efac' }}>All Dossiers Complete! üéâ</h3>
                <p style={{ color: '#d4d4d4' }} className="mb-4">Amazing work, Bryce. Click any organization above to review or edit.</p>
              </div>
            )}

            {/* Form */}
            {selectedOrg && (
              <form onSubmit={handleSubmit} className="space-y-6">
                <div className="flex items-center justify-between mb-4">
                  <h2 className="text-2xl font-bold flex items-center gap-3 text-white">
                    {isEditing && <span className="text-sm px-3 py-1 rounded-full font-semibold" style={{ background: 'rgba(59, 130, 246, 0.25)', color: '#93c5fd' }}>Editing</span>}
                    {organizations.find(o => o.id === selectedOrg)?.name}
                  </h2>
                  <button
                    type="button"
                    onClick={() => { setSelectedOrg(''); setIsEditing(false); }}
                    className="text-sm px-4 py-2 rounded-lg font-semibold transition-colors"
                    style={{ color: '#d4d4d4', background: 'rgba(60, 40, 30, 0.8)', border: '1px solid rgba(140, 90, 50, 0.3)' }}
                  >
                    Cancel
                  </button>
                </div>

                {/* Client/Prospect Toggle */}
                <div className="flex items-center gap-4">
                  <span className="text-sm font-medium" style={{ color: '#d4d4d4' }}>Status:</span>
                  <button
                    type="button"
                    onClick={() => handleInputChange('status', formData.status === 'Client' ? 'Prospect' : 'Client')}
                    className="relative inline-flex items-center gap-1 p-1 rounded-full"
                    style={{ background: 'rgba(30, 22, 18, 0.9)', border: '1px solid rgba(140, 90, 50, 0.3)' }}
                  >
                    <span 
                      className="px-5 py-2 rounded-full text-sm font-semibold transition-all duration-300"
                      style={{ 
                        background: formData.status === 'Client' ? 'linear-gradient(135deg, #16a34a 0%, #22c55e 100%)' : 'transparent',
                        color: formData.status === 'Client' ? 'white' : '#a1a1aa',
                        boxShadow: formData.status === 'Client' ? '0 4px 16px rgba(34, 197, 94, 0.3)' : 'none'
                      }}
                    >
                      Client
                    </span>
                    <span 
                      className="px-5 py-2 rounded-full text-sm font-semibold transition-all duration-300"
                      style={{ 
                        background: formData.status === 'Prospect' ? 'linear-gradient(135deg, #2563eb 0%, #3b82f6 100%)' : 'transparent',
                        color: formData.status === 'Prospect' ? 'white' : '#a1a1aa',
                        boxShadow: formData.status === 'Prospect' ? '0 4px 16px rgba(59, 130, 246, 0.3)' : 'none'
                      }}
                    >
                      Prospect
                    </span>
                  </button>
                </div>

                {/* Engagement Date */}
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-semibold mb-2 text-white">
                      {formData.status === 'Prospect' ? 'Pipeline Entry Month' : 'Engagement Start Month'}
                    </label>
                    <select
                      value={formData.engagementMonth}
                      onChange={(e) => handleInputChange('engagementMonth', e.target.value)}
                      required
                      className="w-full px-4 py-3 rounded-xl text-white focus:outline-none transition-all duration-300 cursor-pointer appearance-none focus-glow warm-input"
                    >
                      <option value="" disabled>Month</option>
                      {months.map(month => <option key={month} value={month} style={{ background: '#1a1310' }}>{month}</option>)}
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm font-semibold mb-2 text-white">Year</label>
                    <select
                      value={formData.engagementYear}
                      onChange={(e) => handleInputChange('engagementYear', e.target.value)}
                      required
                      className="w-full px-4 py-3 rounded-xl text-white focus:outline-none transition-all duration-300 cursor-pointer appearance-none focus-glow warm-input"
                    >
                      {years.map(year => <option key={year} value={year} style={{ background: '#1a1310' }}>{year}</option>)}
                    </select>
                  </div>
                </div>

                {/* Practice Areas */}
                <div>
                  <label className="block text-sm font-semibold mb-3 text-white">Practice Areas</label>
                  <div className="grid gap-2">
                    {practiceCards.map((practice) => (
                      <button
                        key={practice.id}
                        type="button"
                        onClick={() => handlePracticeToggle(practice.id)}
                        className="flex items-center gap-3 p-4 rounded-xl transition-all duration-300 text-left"
                        style={{
                          background: formData.practices[practice.id] ? 'rgba(234, 88, 12, 0.15)' : 'rgba(30, 22, 18, 0.9)',
                          border: `1px solid ${formData.practices[practice.id] ? 'rgba(234, 88, 12, 0.5)' : 'rgba(140, 90, 50, 0.3)'}`
                        }}
                      >
                        <div className="w-6 h-6 rounded flex items-center justify-center" style={{
                          background: formData.practices[practice.id] ? 'linear-gradient(135deg, #ea580c 0%, #f97316 100%)' : 'transparent',
                          border: `2px solid ${formData.practices[practice.id] ? '#ea580c' : 'rgba(140, 90, 50, 0.5)'}`
                        }}>
                          {formData.practices[practice.id] && (
                            <svg className="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="3">
                              <path strokeLinecap="round" strokeLinejoin="round" d="M5 13l4 4L19 7" />
                            </svg>
                          )}
                        </div>
                        <span className="font-semibold" style={{ color: formData.practices[practice.id] ? '#ffffff' : '#e5e5e5' }}>{practice.title}</span>
                      </button>
                    ))}
                  </div>
                </div>

                {/* Work Fields */}
                {[
                  { key: 'workDelivered', label: 'Work Delivered', color: '#22c55e', placeholder: 'Completed deliverables and outcomes...' },
                  { key: 'activeWork', label: 'Active Work Underway', color: '#ea580c', placeholder: 'Current projects and engagements...', pulse: true },
                  { key: 'futureWork', label: 'Potential Future Work', color: '#3b82f6', placeholder: 'Opportunities and proposed projects...' },
                  { key: 'comments', label: 'Other Comments', color: '#a855f7', placeholder: 'Key contacts, relationship notes...' }
                ].map(field => (
                  <div key={field.key}>
                    <label className="block text-sm font-semibold mb-2 text-white">
                      <span className="inline-flex items-center gap-2">
                        <span className={`w-2 h-2 rounded-full ${field.pulse ? 'dot-pulse' : ''}`} style={{ background: field.color }} />
                        {field.label}
                      </span>
                    </label>
                    <textarea
                      value={formData[field.key]}
                      onChange={(e) => handleInputChange(field.key, e.target.value)}
                      placeholder={field.placeholder}
                      rows={2}
                      className="w-full px-4 py-3 rounded-xl text-white placeholder-gray-500 focus:outline-none transition-all duration-300 resize-none focus-glow warm-input"
                    />
                  </div>
                ))}

                {/* Submit */}
                <button type="submit" disabled={isSubmitting} className="w-full relative group">
                  <div
                    className="flex items-center justify-center gap-3 px-6 py-4 rounded-xl font-bold text-lg transition-all duration-300"
                    style={{
                      background: isSubmitting ? 'rgba(60, 40, 30, 0.8)' : 'linear-gradient(135deg, #ea580c 0%, #f97316 100%)',
                      color: isSubmitting ? '#71717a' : 'white',
                      cursor: isSubmitting ? 'not-allowed' : 'pointer',
                      boxShadow: isSubmitting ? 'none' : '0 8px 32px rgba(234, 88, 12, 0.4)'
                    }}
                  >
                    {isSubmitting ? (
                      <>
                        <svg className="animate-spin h-5 w-5" viewBox="0 0 24 24">
                          <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                          <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                        </svg>
                        <span>Saving...</span>
                      </>
                    ) : (
                      <span>{isEditing ? 'Update Dossier' : 'Complete Dossier'}</span>
                    )}
                  </div>
                </button>

                {submitStatus === 'success' && (
                  <div className="flex items-center gap-3 px-5 py-4 rounded-xl" style={{ background: 'rgba(34, 197, 94, 0.15)', border: '1px solid rgba(34, 197, 94, 0.4)', color: '#86efac' }}>
                    <svg className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                      <path strokeLinecap="round" strokeLinejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span className="font-semibold">{isEditing ? 'Dossier updated!' : 'Dossier complete! Nice work! üéâ'}</span>
                  </div>
                )}

                {submitStatus === 'error' && (
                  <div className="flex items-center gap-3 px-5 py-4 rounded-xl" style={{ background: 'rgba(239, 68, 68, 0.15)', border: '1px solid rgba(239, 68, 68, 0.4)', color: '#fca5a5' }}>
                    <svg className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                      <path strokeLinecap="round" strokeLinejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span className="font-semibold">Error saving. Please try again.</span>
                  </div>
                )}
              </form>
            )}

            {/* Footer */}
            <footer className="mt-16 pt-6 text-center" style={{ borderTop: '1px solid rgba(140, 90, 50, 0.2)' }}>
              <p className="text-sm font-medium" style={{ color: 'rgba(180, 120, 80, 0.6)' }}>
                Trailblaze Labs ‚Ä¢ Client Dossier Builder
              </p>
            </footer>
          </div>
        </div>
      );
    };

    ReactDOM.render(<BryceDossierApp />, document.getElementById('root'));
  </script>
</body>
</html>
